Test bookings
=============

We want to test some browser views for Bookings.
At first there is only one Booking.

    >>> len(self.catalog(portal_type='Booking'))
    1
    >>> from Products.eXtremeManagement.browser.bookings import BookingView
    >>> bookview = BookingView(self.portal)
    >>> len(bookview.bookinglist())
    1
    >>> bookview.bookinglist()[0]['booking_hours']
    '3:15'

Let's add a Booking as someone else.  That person should be default
only see his own Bookings.

    >>> self.login('employee')
    >>> self.task.invokeFactory('Booking', id='booking-emp', hours=2)
    'booking-emp'
    >>> bookview = BookingView(self.portal)
    >>> len(bookview.bookinglist())
    1
    >>> bookview.bookinglist()[0]['booking_hours']
    '2:00'
    >>> len(self.catalog(portal_type='Booking'))
    2

No bookings have been done in January 2007.

    >>> bookview = BookingView(self.portal, {'year': 2007, 'month': 1})
    >>> bookview.bookinglist()
    []

Let us add one in that month.

    >>> from DateTime import DateTime
    >>> jan1 = DateTime('2007-01-01')
    >>> self.task.invokeFactory('Booking', id='emp-jan1', hours=1, bookingDate=jan1)
    'emp-jan1'
    >>> bookview = BookingView(self.portal, {'year': 2007, 'month': 1})
    >>> len(bookview.bookinglist())
    1
    >>> bookview.bookinglist()[0]['booking_date']
    '2007-01-01'

Now, a booking on the first of the month might inadvertently be listed
in the previous month as well.  Let's make sure we do not make that
mistake.

    >>> bookview = BookingView(self.portal, {'year': 2006, 'month': 12})
    >>> bookview.bookinglist()
    []


