<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      i18n:domain="eXtremeManagement"
      metal:use-macro="here/main_template/macros/master">

  <head>
    <metal:block fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border', 1)" />
  </head>

  <body>

    <tal:main metal:fill-slot="main"
              tal:define="view context/@@task_details;
                          projects view/projects;">

      <p>
        <tal:goto i18n:translate="show">Show</tal:goto>
        <tal:options tal:repeat="state view/possible_states">
          <a  tal:attributes="href string:${template/absolute_url}?state=${state}"
              tal:content="state" /><tal:separator tal:condition="not:repeat/state/end">,</tal:separator>
        </tal:options>
        Tasks.
      </p>


      <h1 i18n:translate="heading-my-task-overview">My <tal:state tal:replace="view/state" /> task overview</h1>

      <p i18n:translate="description-overview-my-tasks">
        Overview of tasks that belong to me.  The totals mentioned are
        the total time for myself, so they will usually differ from
        adding the numbers of the column above it.
      </p>

      <tal:loop tal:repeat="project_info projects">
        <tal:block tal:define="items project_info/tasks;
                               show_story python:True;
                               project project_info/project;
                               tot project_info/totals;
                               totalEstimate python:tot[0];
                               totalActual python:tot[1];
                               totalDifference python:tot[2];">
          <h2 tal:content="project/Title" />
          <table metal:use-macro="here/story_view/macros/tasklist_table" />
        </tal:block>
      </tal:loop>

    </tal:main>
  </body>
</html>
