<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="eXtremeManagement">
    
  <body>
  <div metal:fill-slot="main">
    <div metal:define-macro="body"
         tal:define="view context/@@task;
                     task view/main;
                     tasks python:context.aq_parent.getFolderContents();
                     num_tasks python:len(tasks);
                     pos context/getObjPositionInParent;
                     next python:pos &lt; num_tasks-1 and tasks[pos+1];
                     prev python:pos != 0 and tasks[pos-1];">

      <metal:prevnext use-macro="context/story_view/macros/previous_next" />

        <div class="documentDescription"
             tal:condition="task/description"
             tal:content="task/description">
            description
        </div>
        <div metal:define-slot="after-description" />
        <div tal:replace="structure task/cooked_body" />
        <table class="listing"
                border="1" 
                width="100%"
                cellpadding="0" 
                cellspacing="0">
            <tr>
                <th class="customer_info_header" 
                    i18n:translate="listingheader_estimate">
                    Estimate
                </th>
                <td tal:content="task/estimate" />
            </tr>
            <tr>
                <th class="customer_info_header" 
                    i18n:translate="listingheader_actual">
                    Actual
                </th>
                <td tal:content="task/actual">
                    0:00
                </td>
            </tr>
            <tr>
                <th class="customer_info_header"
                    i18n:translate="listingheader_state">
                    Status
                </th>
                <td tal:content="task/review_state" />
            </tr>
            <tr>
                <th class="customer_info_header"
                    i18n:translate="listingheader_assignees">
                    Assignee(s)
                </th>
                <td>
                    <tal:block
                          tal:repeat="item task/assignees">
                        <img tal:replace="structure context/user.gif" />
                        <span tal:replace="item">Assignee</span>
                        <br />
                    </tal:block>
                </td>
            </tr>
        </table>

        <tal:block tal:define="bookings view/bookings"
                   tal:condition="bookings">
            <h1 i18n:translate="heading-bookings">Bookings</h1>
            
            <table border="1" 
                   class="listing" 
                   with="100%">
                <tr>
                    <th i18n:translate="listingheader-day-of-week">
                      Day
                    </th>
                    <th i18n:translate="listingheader-bookingdate">
                        Date
                    </th>
                    <th i18n:translate="listingheader-booking">
                        Booking
                    </th>
                    <th i18n:translate="listingheader-time">
                        Time
                    </th>
                    <th i18n:translate="listingheader-booked-by">
                        Booked by
                    </th>
                    <th i18n:translate="listingheader-billable">
                        Billable
                    </th>
                </tr>
            
                <tr tal:repeat="booking bookings">
                    <td tal:content="booking/day_of_week">
                        Monday
                    </td>
                    <td tal:content="booking/date">
                        2006-01-01
                    </td>
                    <td>
                        <a tal:attributes="href string:${booking/url}"
                           class="booking_title"
                           tal:content="booking/title" />
                        <div class="booking_description" 
                             tal:content="booking/description" />
                    </td>
                    <td tal:content="booking/actual" />
                    <td tal:content="booking/creator" />
                    <td tal:content="booking/billable" />
                </tr>
            </table>
        </tal:block>

    </div>
    <metal:block metal:define-macro="folderlisting" />
  </div>
  </body>
</html>

