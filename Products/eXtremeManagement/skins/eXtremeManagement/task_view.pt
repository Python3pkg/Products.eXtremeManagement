<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      i18n:domain="eXtremeManagement">
    <metal:block use-macro="context/global_defines/macros/defines" />
    
    <body>
    <metal:block metal:define-macro="header">
        <h1 tal:content="here/title_or_id" 
            class="documentFirstHeading">
            Title or id
        </h1>
        <div class="documentDescription"
             tal:condition="here/Description"
             tal:content="here/Description">
            description
        </div>
        <div tal:replace="structure context/CookedBody" />
    </metal:block>
    
    <metal:block metal:define-macro="body">

        <table class="listing"
                border="1" 
                width="100%"
                cellpadding="0" 
                cellspacing="0">
            <tr>
                <th class="customer_info_header" 
                    i18n:translate="listingheader_estimate">
                    Estimate
                </th>
                <td tal:content="here/getEstimate">
                    Estimate
                </td>
            </tr>
            <tr>
                <th class="customer_info_header"
                    i18n:translate="listingheader_state">
                    Status
                </th>
                <td tal:define="wtool here/portal_workflow;
                                review_state python:wtool.getInfoFor(here, 'review_state')"
                    tal:content="review_state">
                    Status
                </td>
            </tr>
            <tr>
                <th class="customer_info_header"
                    i18n:translate="listingheader_assignees">
                    Assignee(s)
                </th>
                <td>
                    <span tal:omit-tag="" 
                          tal:repeat="item here/getAssignees">
                        <img src="user.gif"
                             alt="" />
                        <span tal:replace="item">Assignee</span>
                        <br />
                    </span>
                </td>
            </tr>
        </table>

        <tal:block tal:define="current_path python:'/'.join(context.getPhysicalPath());
                                bookings python:here.contentValues('Booking')"
                   tal:condition="bookings">
            <h1 i18n:translate="heading-bookings">Bookings</h1>
            
            <table border="1" 
                   class="listing" 
                   with="100%">
                <tr>
                    <th i18n:translate="listingheader-bookingdate">
                        Date
                    </th>
                    <th i18n:translate="listingheader-booking">
                        Booking
                    </th>
                    <th i18n:translate="listingheader-time">
                        Time
                    </th>
                    <th i18n:translate="listingheader-booked-by">
                        Booked by
                    </th>
                    <th i18n:translate="listingheader-billable">
                        Billable
                    </th>
                </tr>
            
                <tr tal:repeat="booking bookings">
                    <td tal:content="booking/getBookingDate">
                        2006-01-01
                    </td>
                    <td>
                        <a tal:attributes="href string:${booking/absolute_url}"
                           class="booking_title"
                           tal:content="booking/Title">
                            Title
                        </a>
                        <div class="booking_description" 
                             tal:content="booking/Description">
                            Description
                        </div>
                    </td>
                    <td tal:content="booking/getActualHours">
                        4:45
                    </td>
                    <td tal:content="booking/Creator">
                        Maurits
                    </td>
                    <td tal:content="booking/getBillable">
                        True
                    </td>
                </tr>
            </table>
        </tal:block>

    </metal:block>
    <metal:block metal:define-macro="folderlisting" />
    </body>
</html>

