<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      i18n:domain="eXtremeManagement"
      metal:use-macro="here/main_template/macros/master">

  <head>
      <metal:block fill-slot="top_slot">
        <span tal:replace="nothing"
              tal:define="dummy python:request.set('enable_border', 1)" />
      </metal:block>

      <metal:block fill-slot="css_slot">
        <style type="text/css" media="screen"
               tal:content="string: @import url($portal_url/eXtreme.css);">
        </style>
      </metal:block>
  </head>

  <body>

    <div metal:fill-slot="main" 
         tal:define="iteration_path python:'/'.join(here.getPhysicalPath());
                     stories python:here.portal_catalog.searchResults(portal_type='Story',
                                                                      sort_on='Date',
                                                                      sort_order='traverse',
                                                                      path=iteration_path);">

        <h1 tal:content="here/title_or_id" class="documentFirstHeading">
          Title or id
        </h1>

        <div class="stx" tal:content="here/Description">
            description
        </div>

        <tal:block tal:condition="stories">
          <h1 class="" i18n:translate="heading-stories">Stories</h1>
            <table class="listing"
                   width="80%"
                   border="1"
                   cellpadding="0"
                   cellspacing="0">

              <tr tal:condition="python:here.contentValues('Story')">
                <th i18n:translate="listingheader_title">Title</th>
                <th i18n:translate="listingheader_desc">Description</th>
                <th i18n:translate="listingheader_state">Status</th>
              </tr>

              <tr tal:repeat="story stories">
                <div tal:define="storyObj story/getObject;">
                  <td width="30%">
                    <a href=""
                       tal:attributes="href string:${storyObj/absolute_url}">
                       <span tal:content="storyObj/Title">Title</span></a></td>

                  <td tal:content="story/Description">Descriptino</td>
                  <td tal:define="wtool here/portal_workflow;
                                  review_state python:wtool.getInfoFor(storyObj, 'review_state')"
                      tal:content="review_state">Status</td>
                </div>
              </tr>
            </table>
        </tal:block>

        <div class="discreet" 
             tal:condition="python: not stories"
             i18n:translate="no_stories_published">No stories published yet.</div>

    </div>
  </body>
</html>
