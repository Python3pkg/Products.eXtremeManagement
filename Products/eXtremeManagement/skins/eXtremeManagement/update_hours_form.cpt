<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      i18n:domain="eXtremeManagement"
      metal:use-macro="here/main_template/macros/master">

  <head>
      <metal:block fill-slot="top_slot"
                   tal:define="dummy python:request.set('disable_border', 1)" />

      <metal:block fill-slot="css_slot">
        <style type="text/css" media="screen"
               tal:content="string: @import url($portal_url/eXtreme.css);">
        </style>
     </metal:block>
  </head>

  <body>

    <div metal:fill-slot="main"
         tal:define="tasks python:here.getOwnTasks();">

       <h1 i18n:translate="header_time_registration" 
           class="documentFirstHeading">
         Time registration
       </h1>

       <tal:block tal:condition="tasks">
        
          <p class="discreet" 
             i18n:translate="description_time_registration"> 
          To register your time (hours), use the form below and press 'Send'.
          </p>

        <form tal:define="errors options/state/getErrors"
              tal:attributes="action string:${here/absolute_url}/${template/id};"
              method="post">

          <table class="listing"
                 border="1" 
                 width="80%"
                 cellpadding="0" 
                 cellspacing="0">

             <tr>
               <th i18n:translate="listingheader_desc">Task Description</th> 
               <th i18n:translate="listingheader_state">Status</th>
               <th i18n:translate="listingheader_estimate">Estimate</th>
               <th i18n:translate="listingheader_actual">Actual</th>
             </tr>

             <tr tal:repeat="task tasks">
                 <td>
                   <a href=""
                      tal:attributes="href task/absolute_url">
                      <img src="task_icon.gif" /> 
                      <span tal:content="task/Title">Task</span></a></td>

                 <td tal:define="wtool here/portal_workflow;
                                 review_state python:wtool.getInfoFor(task, 'review_state')"
                   tal:content="review_state">Status</td>
                 <td id="estimate" 
                     tal:content="task/getEstimate">Estimate</td>

                 <td id="actual" 
                     tal:define="actualValue python:task.getActual();">
                     <input type="text"
                            size="5"
                            value=""
                            id="input_field_center"
                            tal:attributes="name task/UID;
                                            value actualValue" />
                 </td>
             </tr>
          </table>

          <input class="context"
                 tabindex=""
                 type="submit"
                 name="submit"
                 value="Send"
                 i18n:attributes="value"
                 tal:attributes="tabindex tabindex/next;"/>
          <input type="hidden" name="form.submitted" value="1" />

       </form>

      </tal:block>

      <div tal:condition="not:tasks" class="discreet">
        <p i18n:translate="no_tasks_assigned">No tasks are assigned to you!</p>
      </div>

    </div>
  </body>
</html>


